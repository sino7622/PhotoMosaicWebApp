# 🖼️ Photo Mosaic Web App（照片馬賽克大師）

**Photo Mosaic Web App** 是一個輕量化、免安裝、純前端運算的  
📸 **照片馬賽克（Photo Mosaic）產生器**。

使用者只需上傳一張目標主圖，並提供多張素材小圖，系統便會透過色彩分析與比對演算法，將素材拼湊成一幅 **遠看是主圖、近看是素材拼貼** 的藝術作品。

---

## ✨ 特色亮點

### 🔒 純前端運算（Privacy First）
- 所有影像處理皆於 **使用者瀏覽器端** 完成
- **無需後端伺服器、不上傳任何資料**
- 安全、快速、零部署成本

### 🎨 Alpha Blending 視覺強化
- 內建 **透明度混合（Alpha Blending）**
- 即使素材數量不多，也能清楚保留主圖輪廓與色彩層次

### 📊 視覺化回饋
- 採用 **Bootstrap 5** 設計現代化 UI
- 即時計算進度條，運算狀態一目了然

### ⚙️ 參數高度可調
- **Tile Size（格子大小）**：控制細膩程度
- **Alpha（混合比例）**：平衡「素材真實感」與「主圖還原度」

### 💾 一鍵導出
- 支援直接下載高解析度 **PNG 圖檔**
- 適合設計、展示、輸出列印

---

## 🚀 快速開始

### 1️⃣ 安裝與執行
本專案為 **單一 HTML 檔案 Web App**，無需任何安裝：

1. 下載 `index.html`
2. 使用以下任一瀏覽器直接開啟：
   - Google Chrome
   - Microsoft Edge
   - Mozilla Firefox

> ✅ 建議使用桌面版瀏覽器以獲得最佳效能

---

### 2️⃣ 使用步驟

1. **上傳主圖**
   - 選擇一張你想轉換成馬賽克的大圖

2. **載入素材圖庫**
   - 一次選取多張照片作為拼貼素材  
   - 👉 建議 **50 張以上** 效果最佳

3. **設定參數**
   - Tile Size：建議 `10–15`
   - Alpha：建議 `0.3–0.5`

4. **生成與下載**
   - 點擊「開始生成」
   - 完成後即可下載 PNG 成果圖

---

## 🧠 技術細節（Technical Deep Dive）

本專案核心基於 **像素分析、色彩距離計算與即時渲染**。

---

### 1️⃣ 色彩量化（Average Color Calculation）

系統會對：
- 每張素材圖
- 主圖的每個網格區塊  

分別計算其 **平均 RGB 色彩值**：

\[
R_{avg} = \frac{1}{n}\sum_{i=1}^{n}R_i,\quad
G_{avg} = \frac{1}{n}\sum_{i=1}^{n}G_i,\quad
B_{avg} = \frac{1}{n}\sum_{i=1}^{n}B_i
\]

---

### 2️⃣ 最鄰近搜索（Nearest Neighbor Search）

在 RGB 色彩空間中，使用 **歐幾里得距離（Euclidean Distance）**  
尋找與主圖區塊顏色最接近的素材圖：

\[
d = \sqrt{(R_1 - R_2)^2 + (G_1 - G_2)^2 + (B_1 - B_2)^2}
\]

---

### 3️⃣ Alpha Blending 視覺混合

為提升整體視覺還原度，繪製時採用透明度混合公式：

\[
C_{final} = C_{tile} \times (1 - \alpha) + C_{main} \times \alpha
\]

其中：
- \(C_{tile}\)：素材圖顏色
- \(C_{main}\)：主圖顏色
- \(\alpha\)：使用者設定的混合比例

---

## 🛠️ 使用技術

- **HTML5 Canvas API**  
  - 像素讀取、色彩分析、即時渲染

- **JavaScript（ES6+）**  
  - 非同步圖像處理  
  - 透過 `setTimeout` 模擬 Web Worker，避免 UI 阻塞

- **Bootstrap 5**  
  - 響應式介面設計
  - 視覺化操作流程

---

## 💡 使用建議與最佳化

### ⚡ 效能優化
- 若主圖解析度超過 **4000px**
  - 建議調大 Tile Size
  - 可顯著降低運算時間

### 🧩 素材圖庫建議
- 素材顏色分佈越均勻（RGB 多樣）
- 馬賽克細節與層次感越佳

---

## 📄 授權說明
本專案為前端展示與教學用途，可依實際需求自由延伸與修改。

---

🎉 **Enjoy building your own Photo Mosaic!**
